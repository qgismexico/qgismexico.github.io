<!doctype html><html lang=es><head><meta charset=utf-8><title>QGIS ft Docker sobre CentOS y RedHat - QGIS M√©xico</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href="/favicon/apple-touch-icon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="/favicon/favicon-32x32.png?v=1"><link rel=icon type=image/png sizes=16x16 href="/favicon/favicon-16x16.png?v=1"><link rel=manifest href="/favicon/site.webmanifest?v=1"><link rel=mask-icon href="/favicon/safari-pinned-tab.svg?v=1" color=#ffffff><link rel="shortcut icon" href="/favicon/favicon.ico?v=1"><meta name=msapplication-config content="/favicon/browserconfig.xml?v=1"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.64.0"><meta itemprop=name content="QGIS ft Docker sobre CentOS y RedHat"><meta itemprop=description content="Ing. Federico Fabi√°n Jim√©nez Esparza [ffabianjimenez@gmail.com]
QGIS puede ser instalado en varias distribuciones y versiones de Linux, sin embargo, en CentOs y RedHat no es compatible con las √∫ltimas versiones de Qgis 3.X en adelante. Dado lo anterior y despu√©s de invertir 30 d√≠as intentando instalar Qgis 3.x en Centos/RedHat 7/8, me he encontrado con un sin fin de dependencias y aplicativos con versiones espec√≠ficas, las cuales se contraponen unas con otras; decid√≠ que la mejor opci√≥n para mi caso, es la instalaci√≥n de Docker con su correspondiente container de QGIS."><meta itemprop=datePublished content="2019-12-25T00:00:00+00:00"><meta itemprop=dateModified content="2019-12-25T00:00:00+00:00"><meta itemprop=wordCount content="1078"><meta itemprop=image content="https://qgismexico.gihub.io/images/qgis_docker.png"><meta itemprop=keywords content=","><meta property="og:title" content="QGIS ft Docker sobre CentOS y RedHat"><meta property="og:description" content="Ing. Federico Fabi√°n Jim√©nez Esparza [ffabianjimenez@gmail.com]
QGIS puede ser instalado en varias distribuciones y versiones de Linux, sin embargo, en CentOs y RedHat no es compatible con las √∫ltimas versiones de Qgis 3.X en adelante. Dado lo anterior y despu√©s de invertir 30 d√≠as intentando instalar Qgis 3.x en Centos/RedHat 7/8, me he encontrado con un sin fin de dependencias y aplicativos con versiones espec√≠ficas, las cuales se contraponen unas con otras; decid√≠ que la mejor opci√≥n para mi caso, es la instalaci√≥n de Docker con su correspondiente container de QGIS."><meta property="og:type" content="article"><meta property="og:url" content="https://qgismexico.gihub.io/blog/qgis-ft-docker-sobre-centos-y-redhat/"><meta property="og:image" content="https://qgismexico.gihub.io/images/qgis_docker.png"><meta property="article:published_time" content="2019-12-25T00:00:00+00:00"><meta property="article:modified_time" content="2019-12-25T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://qgismexico.gihub.io/images/qgis_docker.png"><meta name=twitter:title content="QGIS ft Docker sobre CentOS y RedHat"><meta name=twitter:description content="Ing. Federico Fabi√°n Jim√©nez Esparza [ffabianjimenez@gmail.com]
QGIS puede ser instalado en varias distribuciones y versiones de Linux, sin embargo, en CentOs y RedHat no es compatible con las √∫ltimas versiones de Qgis 3.X en adelante. Dado lo anterior y despu√©s de invertir 30 d√≠as intentando instalar Qgis 3.x en Centos/RedHat 7/8, me he encontrado con un sin fin de dependencias y aplicativos con versiones espec√≠ficas, las cuales se contraponen unas con otras; decid√≠ que la mejor opci√≥n para mi caso, es la instalaci√≥n de Docker con su correspondiente container de QGIS."><meta name=twitter:site content="@qgismexico"><link rel=stylesheet href=/css/bundle.min.122bf077d53f56b1f764db5a8c387dd81587f604dbf07bbf3f86a62b06e00ca9.css integrity="sha256-Eivwd9U/VrH3ZNtajDh92BWH9gTb8Hu/P4amKwbgDKk="><link rel=stylesheet href=/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/>Blog</a></h1><menu id=site-nav-menu class=flyout-menu><a href=/ class=link><i class="fa fa-home"></i>Inicio</a>
<a href=/blog/ class=link><i class="far fa-newspaper"></i>Blog</a>
<a href=/qmeetings/ class=link><i class="fas fa-sitemap"></i>Categorias</a>
<a href=/about/ class=link><i class="far fa-id-card"></i>Miembros</a>
<a href=https://www.qgis.org/es/site/ class=link><i class="far fa-download"></i>Descargar</a>
<a href=#share-menu class=share-toggle><i class="fas fa-share-alt">&nbsp;</i>Share</a></menu>
<a href=#share-menu class=share-toggle><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class=lang-toggle lang=es>es</a>
<a href=#site-nav class=nav-toggle><i class="fas fa-bars fa-2x"></i></a></nav><menu id=lang-menu class=flyout-menu><a href=# lang=es class="link active">Espa√±ol (es)</a></menu>
<menu id=share-menu class=flyout-menu><h1>Share Post</h1><a href="//twitter.com/share?text=QGIS%20ft%20Docker%20sobre%20CentOS%20y%20RedHat&url=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank rel=noopener class="share-btn twitter"><i class="fab fa-twitter"></i><p>&nbsp;Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank rel=noopener class="share-btn facebook"><i class="fab fa-facebook"></i><p>&nbsp;Facebook</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f&title=QGIS%20ft%20Docker%20sobre%20CentOS%20y%20RedHat" target=_blank rel=noopener class="share-btn linkedin"><i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p></a><a href="mailto:?subject=Check out this post by %40yoltoltohua&body=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank class="share-btn email" data-proofer-ignore><i class="fas fa-envelope"></i><p>&nbsp;Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=/><img src=/images/logo_qgis.png class=circle width alt="Hugo Future Imperfect Slim"></a><header><h1>QGIS M√©xico</h1></header><main><p>Grupo Oficial de Usuarios</p></main><footer><ul class=socnet-icons><li><a href=//github.com/qgismexico target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/qgismexico target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//facebook.com/qgismexico target=_blank rel=noopener title=Facebook class="fab fa-facebook"></a></li><li><a href=//youtube.com/c/QGISM%c3%a9xico target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></li><li><a href=//instagram.com/qgismexico target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/qgismexico target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:qgismexico@gmail.com target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=/blog/qgis-ft-docker-sobre-centos-y-redhat/>QGIS ft Docker sobre CentOS y RedHat</a></h2></div><div class=meta><time class=published datetime="2019-12-25 00:00:00 +0000 UTC">25 de Enero, 2019</time>
<span class=author>@yoltoltohua</span><p>6 minutos</p></div></header><section id=socnet-share><a href="//twitter.com/share?text=QGIS%20ft%20Docker%20sobre%20CentOS%20y%20RedHat&url=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank rel=noopener class="share-btn twitter"><i class="fab fa-twitter"></i><p>&nbsp;Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank rel=noopener class="share-btn facebook"><i class="fab fa-facebook"></i><p>&nbsp;Facebook</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f&title=QGIS%20ft%20Docker%20sobre%20CentOS%20y%20RedHat" target=_blank rel=noopener class="share-btn linkedin"><i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p></a><a href="mailto:?subject=Check out this post by %40yoltoltohua&body=https%3a%2f%2fqgismexico.gihub.io%2fblog%2fqgis-ft-docker-sobre-centos-y-redhat%2f" target=_blank class="share-btn email" data-proofer-ignore><i class="fas fa-envelope"></i><p>&nbsp;Email</p></a></section><a href=/blog/qgis-ft-docker-sobre-centos-y-redhat/ class="image featured"><img src=/images/qgis_docker.png alt></a><div class=content><p><strong>Ing. Federico Fabi√°n Jim√©nez Esparza</strong> [ffabianjimenez@gmail.com]</p><p>QGIS puede ser instalado en varias distribuciones y versiones de Linux, sin embargo, en CentOs y RedHat no es compatible con las √∫ltimas versiones de Qgis 3.X en adelante. Dado lo anterior y despu√©s de invertir 30 d√≠as intentando instalar <strong>Qgis 3.x en Centos/RedHat 7/8</strong>, me he encontrado con un sin fin de dependencias y aplicativos con versiones espec√≠ficas, las cuales se contraponen unas con otras; decid√≠ que la mejor opci√≥n para mi caso, es la instalaci√≥n de <strong>Docker</strong> con su correspondiente <strong>container</strong> de <strong>QGIS</strong>.</p><p>Cabe hacer menci√≥n que la instalaci√≥n de <strong>QGIS</strong> sobre <strong>Ubuntu 18.04</strong> es algo f√°cil y directo. Si se cuenta con dicho S.O. no es necesario la instalaci√≥n de Docker, a menos que quieras mantener encapsulado dicho software.</p><p>Un <strong>container</strong> a primera vista pareciera ser una <strong>maquina virtual</strong>, sin embargo, no lo es, ya que su objetivo principal es ofrecer micro servicios, por lo que no esperes que QGIS se ejecute como un GUI, sino que su uso ser√° por medio de <strong>CLI</strong>. La intenci√≥n de esta publicaci√≥n ¬†no es la instalaci√≥n, explicaci√≥n, funcionamiento y configuraci√≥n de Docker, por lo que si quieres documentarte al respecto, visita la <a href=https://www.docker.com/resources/what-container>p√°gina oficial</a>. Aqu√≠ solo explicar√© de manera general y concisa la instalaci√≥n y ejecuci√≥n de Docker; posteriormente descarga y ejecuci√≥n de QGIS por medio de un container.</p><h4 id=instalaci√≥n-y-ejecuci√≥n-de-docker-bajo-centos--redhat><strong>Instalaci√≥n y ejecuci√≥n de Docker bajo Centos / RedHat</strong></h4><p>Comando</p><p>Explicaci√≥n</p><p>#yum-utils y device-mapper-persistent-data</p><p>Instalaci√≥n de paquetes necesarios para Docker.</p><p>#yum-config-manager &ndash;add-repo <a href=https://download.docker.com/linux/centos/docker-ce.repo>https://download.docker.com/linux/centos/docker-ce.repo</a></p><p>Se agrega el repositorio para la instalaci√≥n del Docker.</p><p>#yum install docker-ce docker-ce-cli containerd.io</p><p>Instalaci√≥n del Docker</p><p>Si en el √∫ltimo comando desplegara un error de Dependency: <strong>container-selinux >= 2:2.74 for package: containerd.io-1.2.6-3.3.el7.x86_64</strong> se puede hacer lo siguiente:</p><p>Bajar el archivo <strong>containerd.io-1.2.6-3.3.el7.x86_64</strong>¬† de la siguiente URL <a href=http://mirror.centos.org/centos/7/extras/x86_64/Packages/>http://mirror.centos.org/centos/7/extras/x86_64/Packages/</a> e instalarlo con el comando</p><p><strong>#rpm ‚Äìivh containerd.io-1.2.6-3.3.el7.x86_64 .rpm</strong></p><p>Si tenemos la activaci√≥n con <strong>RedHat</strong>, activar el repositorio de extras e instalarlo subscription-manager repos &ndash;enable=rhel-7-server-extras-rpms</p><p>El fingerprint deber√° de ser <strong>060a 61c5 1b55 8a7f 742b 77aa c52f eb6b 621e 9f35</strong></p><p>Con lo anterior, ya se tiene instalado la parte de docker, ahora lo que tenemos que hacer es hacer que se levante el servicio de manera autom√°tica cada vez que se reinicie el servidor:</p><p>Comando</p><p>Explicaci√≥n</p><p>#systemctl start docker</p><p>Inicio del daemon de Docker</p><p>#systemctl stop docker</p><p>Parar el daemon de Docker</p><p>Con lo anterior, ya estar√° ejecutando el servicio de Docker sobre nuestro servidor.</p><h4 id=descarga-y-ejecuci√≥n-de-qgis><strong>Descarga y ejecuci√≥n de QGIS</strong></h4><p>Primeramente, buscaremos las im√°genes disponibles que se tienen para <strong>QGIS</strong>, esto ser√° por medio de comando ‚Äú<strong>Docker search qgis</strong>‚Äù</p><p><img src=/images/image-4.png alt></p><p>Como se puede observar, existen varias im√°genes que se pueden descargar, sin embargo, para este caso, se descargara la denominada ‚Äú<strong>qgis/qgis</strong>‚Äù que es el <strong>oficial</strong>.</p><p>#docker pull qgis/qgis</p><p>En este paso comenzara a descargarse la imagen correspondiente sobre nuestro servicio de <strong>Docker</strong>. La versi√≥n de la imagen ‚Äú<strong>qgis/qgis</strong>‚Äù contiene un <strong>Ubuntu 18.04.3 LTS con QGIS 3.10</strong></p><p>Una vez que ya se ha terminado el proceso de descarga de la imagen de QGIS, hay que levantarla o si se quiere ver as√≠, hay que levantar nuestro micro servicio de QGIS para su acceso mediante el siguiente comando.</p><p>#docker run¬† &ndash;rm - qgis/qgis bash</p><p>Con lo anterior, pareciera que ya hemos terminado, sin embargo, apenas estamos empezando el arduo camino para la configuraci√≥n y puesta a punto de QGIS, lo cual depende de que es lo que queramos hacer.</p><p>Dado que <strong>Docker</strong> se maneja por medio de micro servicios y no es una m√°quina virtual, implicara que al momento de bajar este se perder√° lo grabado en la imagen, pero podemos hacer que se graben nuestros cambios por medio de comandos de <strong>Docker</strong>.</p><h4 id=ejemplo><strong>Ejemplo</strong></h4><p>Para explicar esto de una manera m√°s f√°cil y pr√°ctica, supondremos la siguiente situaci√≥n.</p><ol><li>Se quiere servidor con <strong>Qgis 3.x</strong></li><li>Acceder al <strong>Docker</strong> por medio de <strong>ssh</strong> (No recomendable es un micro servicio)</li><li>Se requiere un <strong>Tomcat</strong> en dicho servidor y que acceda a <strong>Qgis</strong> antes instalado</li><li>El acceso del <strong>Tomcat</strong> ser√° por medio de una <strong>intranet</strong>.</li></ol><p>El <strong>paso 1</strong>, es lo que hemos hecho anteriormente, por lo que ya est√° solucionado.</p><p>Para el <strong>paso 2</strong>, solo hay que acceder a la imagen mediante el siguiente comando e instalar el servicio de <strong>openssh-server</strong> sobre el <strong>puerto 22</strong>. Para mi caso, ya se tiene instalado el paquete de <strong>openssh-server</strong></p><p>#docker stats</p><p><img src=/images/image-5.png alt></p><p>Para el <strong>paso 3</strong>, es muy sencillo, por lo que recomienda que se baje alguna versi√≥n de <strong>Java (1.8.0_65) y Tomcat (apache-tomcat-8.0.23)</strong> de los sitios oficiales, descompactaci√≥n y configuraci√≥n de los mismos.</p><p>Como se coment√≥ inicialmente, al ser un <strong>micro-servicio</strong>, no se guardan los cambios realizados de manera autom√°tica, por lo que desde una terminal del servidor <strong>host</strong> se deber√° de teclear un comando como se indica para que guarde los cambios.</p><p>#docker commit -m &ldquo;Instalacion Qgis con Java, Tomcat y OpenSsh&rdquo; &ndash;author &ldquo;Tu nombre&rdquo; df7fc65aebbf qgis/qgis:V2</p><p>Donde <strong>df7fc65aebbf</strong> es el <strong>ID</strong> de la imagen que est√° corriendo.</p><p>Con lo anterior, se hizo una <strong>copia (versi√≥n)</strong> de la imagen de Qgis y con los componentes que se instalaron. Cabe hacer menci√≥n que ahora tenemos dos im√°genes y que pueden ser tantas como se guste.</p><p><img src=/images/image-6.png alt></p><p>Para el <strong>paso 4</strong>. debemos de tener en cuenta de que, al ser un micro servicio, este no deber√≠a de contar con una <strong>IP</strong> propia externa (aunque si la tiene, pero es interna), y que su acceso es por la <strong>IP</strong> del <strong>hosting</strong>, es decir, del servidor en cual se instalado el <strong>Docker</strong>, entonces lo que se har√° en este paso es el redireccionamiento de puertos. Como se puede ver en la siguiente imagen, la <strong>IP</strong> del <strong>container</strong> es <strong>172.17.0.1.</strong></p><p><img src=/images/image-7.png alt></p><p>Entonces, para hacer el re direccionamiento debemos indicarle a Docker que deber√° de tener disponible los <strong>puertos 8080 (Tomcat)</strong> y <strong>22 (Ssh)</strong> al momento de que este levanta, por lo que debemos de bajar la <strong>imagen</strong> del Docker y levantarla de la siguiente manera:</p><p>#docker run &ndash;hostname serqgis &ndash;rm -it -p 8080:22 qgis/qgis:v2 bash</p><p>Creaci√≥n de una regla de iptables para el redireccionamiento del servidor.</p><p>iptables -t nat -A DOCKER -p tcp &ndash;dport 8081 -j DNAT &ndash;to-destination 172.17.0.2:8080</p><p>iptables -t nat -A DOCKER -p tcp &ndash;dport 8082 -j DNAT &ndash;to-destination 172.17.0.2:22</p><p>Suponiendo que la <strong>IP</strong> de nuestro hosting es <strong>10.108.10.120</strong>, entonces si queremos acceder al <strong>Tomcat</strong> instalado en el <strong>container</strong> se har√≠a con la <strong>URL</strong> <a href=http://10.108.10.120:8081>http://10.108.10.120:8081</a> y para el acceso via <strong>ssh</strong> seria con</p><p>$ssh <a href=mailto:root@10.108.10.120>root@10.108.10.120</a> -p 8082</p><blockquote><p><em>La comunidad QGISMexico agradece la colaboraci√≥n del</em></p><p><strong><em>Qgisero Ing. Federico Fabi√°n Jim√©nez Esparza por la redacci√≥n de este tutorial.</em></strong></p></blockquote><p>üåéüêßüåéüêßüåé</p></div><footer><ul class=stats><li class=categories><ul><li><a class=article-category-link href=https://qgismexico.gihub.io/categories/tutoriales>Tutoriales</a></li></ul></li><li class=tags><ul><li><a class=article-category-link href=https://qgismexico.gihub.io/tags/></a></li></ul></li></ul></footer></article><div class=pagination><a href=/blog/ii-reunion-nacional-de-usuarios/ class=button><div class=previous><div>II Reuni√≥n Nacional de Usuarios</div></div></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Posts recientes</h1></header><article class=mini-post><section><a href=/blog/qgis-ft-docker-sobre-centos-y-redhat/ class="image featured"><img src=/images/qgis_docker.png alt></a></section><header><h1><a href=/blog/qgis-ft-docker-sobre-centos-y-redhat/>QGIS ft Docker sobre CentOS y RedHat</a></h1><time class=published datetime>25 de Enero, 2019</time></header></article><article class=mini-post><section><a href=/blog/ii-reunion-nacional-de-usuarios/ class="image featured"><img src=/images/banner-2.jpg alt></a></section><header><h1><a href=/blog/ii-reunion-nacional-de-usuarios/>II Reuni√≥n Nacional de Usuarios</a></h1><time class=published datetime>2 de Enero, 2019</time></header></article><article class=mini-post><section><a href=/blog/qgis-mexico-en-talent-land/ class="image featured"><img src=/images/56474620_794353227608375_1077595607960387584_n-2.jpg alt></a></section><header><h1><a href=/blog/qgis-mexico-en-talent-land/>QGIS M√©xico en Talent Land</a></h1><time class=published datetime>11 de Enero, 2019</time></header></article><a href=/blog/ class=button>Ver m√°s</a></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/qgismexico target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/qgismexico target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//facebook.com/qgismexico target=_blank rel=noopener title=Facebook class="fab fa-facebook"></a></li><li><a href=//youtube.com/c/QGISM%c3%a9xico target=_blank rel=noopener title=YouTube class="fab fa-youtube"></a></li><li><a href=//instagram.com/qgismexico target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/qgismexico target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:qgismexico@gmail.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>&copy; 2019
QGIS M√©xico
.<br>Tema: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>Adaptado de <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP</a> | Impulsado por <a href=https://gohugo.io/ title=0.64.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/bundle.min.e0c399b948d3cf5c3a5e3badb94023d0b064a19ac39fd8cd79fb9f57fa4d1091.js integrity="sha256-4MOZuUjTz1w6XjutuUAj0LBkoZrDn9jNefufV/pNEJE="></script><script src=/js/add-on.js></script></div></body></html>